<div class="profile-container">
  <% display_name = current_user.name.presence || current_user.email.split("@").first %>
  <h1 class="text-3xl font-bold mb-4">Welcome, <%= display_name.capitalize %>!</h1>
  <hr>
  <p><strong>Email:</strong> <%= current_user.email %></p>
  <p><strong>Profile URL:</strong> <%= request.base_url + "/profile" %></p>

  <hr>
  <h2 class="profile-section-title">Your Playlists</h2>
  <% if @playlists.any? %>
    <% @playlists.each do |playlist| %>
      <div class="playlist-wrapper mb-8">
        <div class="playlist-border" style="--gradient: linear-gradient(to right, <%= [playlist.color1, playlist.color2, playlist.color3, playlist.color4, playlist.color5].compact.join(', ') %>);">

          <div class="playlist-card block p-4 bg-black text-white rounded-lg relative z-10">
            <div class="flex justify-between items-center mb-3">
              <!-- Left: Incomplete tag or creation date -->
              <div>
                <% if playlist.incomplete? %>
                <span class="incomplete-tag">INCOMPLETE</span>
                <% else %>
                  <span class="text-sm text-gray-400"><%= playlist.created_at.strftime("%m/%d/%Y") %></span>
                <% end %>
              </div>

            <!-- Playlist Description (wrapped in link) -->
            <%= link_to "/playlists/#{playlist.id}" do %>
              <div class="playlist-desc mt-3 text-white">
                My playlist that smells like
                <span class="scent-<%= playlist.scent1&.parameterize %>"><%= playlist.scent1 %></span>
                <% if playlist.scent2.present? %>
                  and <span class="scent-<%= playlist.scent2.parameterize %>"><%= playlist.scent2 %></span>
                <% end %>
                and feels like
                <span class="texture-<%= playlist.texture&.parameterize %>"><%= playlist.texture %></span>
              </div>
            <% end %>
          </div>
              <!-- Right: Delete button -->
              <div class="ml-4">
                <%= button_to "Delete", "/delete_playlist/#{playlist.id}", method: :delete, data: { confirm: "Are you sure you want to delete this playlist?" }, class: "delete-button" %>
              </div>
            </div>
        </div>
      </div>
    <% end %>
  <% else %>
    <p class="text-gray-400">You haven't created any playlists yet.</p>
  <% end %>


  <!-- Create Playlist Button -->
  <div class="mt-6 mb-8 text-center">
    <%= link_to "Create New Playlist", "/start", class: "generate-button" %>
  </div>


<hr>
  <%= button_to "Delete My Account", delete_user_path, method: :post, data: { confirm: "Are you sure?" }, class: "delete-button" %>
</div>
